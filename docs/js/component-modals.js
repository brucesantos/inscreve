const createComponentModal=(e,n=null)=>{const a=COMPONENT_CONFIGS[e];if(!a)return null;const r=document.createElement("div");r.className="modal",r.innerHTML=`\n    <div class="modal-content">\n      <div class="modal-header">\n        <h2>${n?"Editar":"Adicionar"} ${a.name}</h2>\n        <button class="close-modal">&times;</button>\n      </div>\n      <div class="modal-body">\n        <form id="component-form">\n          <div class="form-group">\n            <label for="title">Título do campo</label>\n            <input type="text" id="title" name="title" required value="${n?.title||""}">\n          </div>\n          <div class="form-group">\n            <label for="description">Descrição (opcional)</label>\n            <textarea id="description" name="description">${n?.description||""}</textarea>\n          </div>\n          <div class="form-group">\n            <label for="required">Campo obrigatório</label>\n            <div class="checkbox-wrapper">\n              <input type="checkbox" id="required" name="required" ${n?.required?"checked":""}>\n              <label for="required">Sim</label>\n            </div>\n          </div>\n          ${a.modalFields.map((e=>{const a=n?.config?.[e.name]??"";switch(e.type){case"text":return`\n                  <div class="form-group">\n                    <label for="${e.name}">${e.label}</label>\n                    <input type="text" id="${e.name}" name="${e.name}" ${e.required?"required":""} value="${a}">\n                  </div>\n                `;case"number":return`\n                  <div class="form-group">\n                    <label for="${e.name}">${e.label}</label>\n                    <input type="number" id="${e.name}" name="${e.name}" ${e.required?"required":""} value="${a}">\n                  </div>\n                `;case"textarea":return`\n                  <div class="form-group">\n                    <label for="${e.name}">${e.label}</label>\n                    <textarea id="${e.name}" name="${e.name}" ${e.required?"required":""}>${a}</textarea>\n                  </div>\n                `;case"checkbox":return`\n                  <div class="form-group">\n                    <label for="${e.name}">${e.label}</label>\n                    <div class="checkbox-wrapper">\n                      <input type="checkbox" id="${e.name}" name="${e.name}" ${a?"checked":""}>\n                      <label for="${e.name}">Sim</label>\n                    </div>\n                  </div>\n                `;case"select":return`\n                  <div class="form-group">\n                    <label for="${e.name}">${e.label}</label>\n                    <select id="${e.name}" name="${e.name}" ${e.required?"required":""}>\n                      ${e.options.map((e=>`\n                        <option value="${e.value}" ${a===e.value?"selected":""}>${e.label}</option>\n                      `)).join("")}\n                    </select>\n                  </div>\n                `;default:return""}})).join("")}\n        </form>\n      </div>\n      <div class="modal-footer">\n        <button class="btn btn-secondary close-modal">Cancelar</button>\n        <button class="btn btn-primary save-component">Salvar</button>\n      </div>\n    </div>\n  `;r.querySelectorAll(".close-modal").forEach((e=>{e.addEventListener("click",(()=>{r.remove()}))}));return r.querySelector(".save-component").addEventListener("click",(()=>{const t=r.querySelector("#component-form"),o=new FormData(t),l={id:n?.id||generateId(),type:e,title:o.get("title"),description:o.get("description"),required:"on"===o.get("required"),config:{}};a.modalFields.forEach((e=>{const n=o.get(e.name);"checkbox"===e.type?l.config[e.name]="on"===n:"number"===e.type&&n?l.config[e.name]=Number(n):n&&(l.config[e.name]=n)}));const i=new CustomEvent("componentSave",{detail:{component:l}});document.dispatchEvent(i),r.remove()})),r},generateId=()=>Math.random().toString(36).substr(2,9);